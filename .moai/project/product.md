# TFT Panel FPGA Controller - 제품 개요

## 목적

TFT Panel FPGA Controller는 a-Si(비정질 실리콘) TFT Flat Panel Detector(FPD)를 위한 완전한 FPGA 컨트롤러 솔루션입니다. 의료 영상, 비파괴 검사, 산업용 X선 이미징 분야에서 사용되는 대형 패널 디텍터를 제어하고 데이터를 수집하는 것이 주 목적입니다.

## 타겟 패널

### R1717AS01.3 사양

| 항목 | 사양 |
|------|------|
| **모델명** | R1717AS01.3 |
| **패널 타입** | a-Si TFT FPD (비정질 실리콘 박막 트랜지스터 평판 디텍터) |
| **해상도** | 2048 x 2048 픽셀 |
| **총 픽셀 수** | 4,194,304 픽셀 (4.2 메가픽셀) |
| **데이터 깊이** | 14비트 ADC |
| **프레임 시간** | 최대 250ms |

### 패널 특성

- **대면적 이미징**: 2048x2048 해상도로 고품질 의료/산업용 이미징 지원
- **고동적 범위**: 14비트 ADC로 16384 레벨 계조 표현
- **저조도 검출**: a-Si 센서의 낮은 다크 전류 특성 활용

## 타겟 FPGA

### Xilinx Artix-7 35T

| 항목 | 사양 |
|------|------|
| **모델명** | xc7a35tcpg236-1 |
| **시스템 클럭** | 100 MHz |
| **논리 셀** | 20,800 |
| **Slice LUTs** | 20,800 (타겟 활용: < 15,000, 72%) |
| **Slice Registers** | 41,600 (타겟 활용: < 20,000, 48%) |
| **BRAM** | 50개 (타겟 활용: < 25개, 25%) |
| **MMCM/PLL** | 2개 (최대 2개 사용) |

## 핵심 기능

### 1. 타이밍 생성 (Timing Generation)

- **행 주소 생성**: 0-2047 순차적 주소 생성
- **열 주소 생성**: 각 행에 대한 열 주소 생성
- **행 클럭**: 5 MHz +/- 1%
- **열 클럭**: 10 MHz +/- 1%
- **통합 시간**: 1-65535 ms 설정 가능
- **ROI 지원**: 관심 영역(Region of Interest) 설정 기능

### 2. 바이어스 제어 (Bias Control)

바이어스 모드에 따라 패널의 바이어스 전압을 제어합니다:

| 모드 | V_PD | V_COL | 설명 |
|------|------|-------|------|
| **NORMAL_BIAS** | -1.5V | -1.0V | 정상 이미징 모드 |
| **IDLE_LOW_BIAS** | -0.2V | -0.2V | 저전력 대기 모드 |
| **SLEEP_BIAS** | 0V | 0V | 절전 모드 |

- **전환 시간**: 10 us 이내
- **글리치 프리**: 노이즈 없는 부드러운 전환

### 3. 더미 스캔 (Dummy Scan)

a-Si TFT 패널의 다크 전류를 감소시키기 위한 주기적 더미 스캔 기능:

- **주기 설정**: 30-65535초
- **행 리셋**: 모든 2048행 순차적 리셋
- **ADC 판독 없음**: 더미 스캔 중에는 데이터 수집 없음
- **완료 시간**: 2ms 이내

### 4. 데이터 수집 (Data Acquisition)

- **ADC 인터페이스**: 14비트 ADC 지원
- **ADC 클럭**: 최대 20 MHz
- **FIFO 버퍼**: 2048 깊이
- **테스트 패턴**: 내부 테스트 패턴 생성 모드

### 5. SPI 슬레이브 인터페이스

MCU와의 통신을 위한 SPI 슬레이브 인터페이스:

- **SPI 모드**: Mode 0 (CPOL=0, CPHA=0)
- **최대 클럭**: 10 MHz
- **레지스터**: 64개 레지스터 (0x00-0x3F)
- **데이터 폭**: 8비트
- **버스트 읽기**: 연속 읽기 지원

### 6. 상태 및 인터럽트

| 인터럽트 | 설명 |
|----------|------|
| **frame_complete** | 프레임 캡처 완료 |
| **dummy_complete** | 더미 스캔 완료 |
| **fifo_overflow** | FIFO 오버플로우 |
| **error** | 일반 에러 |

## 주요 응용 분야

1. **의료 영상**: 디지털 X선, 혈관 조영술, 유방 촬영술
2. **비파괴 검사**: 산업용 X선 검사, 용접 검사
3. **과학 연구**: 재료 과학, 구조 분석
4. **보안 검사**: 수하물 검사, 화물 검사

## 개발 상태

- **SPEC 문서**: SPEC-001 완료
- **구현**: 모든 핵심 모듈 구현 완료
- **테스트**: 7개 테스트벤치 및 자동 실행 스크립트 포함
- **커버리지**: 시뮬레이션 기반 검증 완료

---

문서 버전: 1.0
최종 업데이트: 2026-02-11
